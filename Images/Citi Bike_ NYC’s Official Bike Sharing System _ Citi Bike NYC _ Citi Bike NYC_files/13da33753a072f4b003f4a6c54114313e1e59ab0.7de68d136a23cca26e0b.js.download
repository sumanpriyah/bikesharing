(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[16],{"20a2":function(e,t,n){e.exports=n("nOHt")},QfHs:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"AuthLink",{enumerable:!0,get:function(){return r.A}}),Object.defineProperty(t,"EnvoyAuthContext",{enumerable:!0,get:function(){return r.a}}),Object.defineProperty(t,"useEnvoyAuth",{enumerable:!0,get:function(){return r.u}}),Object.defineProperty(t,"withEnvoyAuth",{enumerable:!0,get:function(){return r.w}}),t.default=void 0,n("q1tI"),n("YFqc"),n("elyg"),n("20a2");var r=n("wBXr");function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var u=function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,e),this.name="@lyft/service-plugin-envoy-auth",this.opts=void 0,this.apply=function(e){e.hooks.app.tap(t.name,(function(e){return(0,r.E)({App:e})}))},this.opts=n};t.default=u},YFqc:function(e,t,n){e.exports=n("cTJO")},cTJO:function(e,t,n){"use strict";var r=n("7KCV");t.__esModule=!0,t.default=void 0;var o=r(n("q1tI")),u=n("elyg"),c=n("nOHt"),i=n("vNVm");const a={};function f(e,t,n,r){if(!e)return;if(!(0,u.isLocalURL)(t))return;e.prefetch(t,n,r).catch((e=>{0}));const o=r&&"undefined"!==typeof r.locale?r.locale:e&&e.locale;a[t+"%"+n+(o?"%"+o:"")]=!0}var l=function(e){const t=!1!==e.prefetch,n=(0,c.useRouter)(),r=n&&n.pathname||"/",{href:l,as:s}=o.default.useMemo((()=>{const[t,n]=(0,u.resolveHref)(r,e.href,!0);return{href:t,as:e.as?(0,u.resolveHref)(r,e.as):n||t}}),[r,e.href,e.as]);let{children:p,replace:d,shallow:y,scroll:v,locale:h}=e;"string"===typeof p&&(p=o.default.createElement("a",null,p));const b=o.Children.only(p),g=b&&"object"===typeof b&&b.ref,[m,w]=(0,i.useIntersection)({rootMargin:"200px"}),O=o.default.useCallback((e=>{m(e),g&&("function"===typeof g?g(e):"object"===typeof g&&(g.current=e))}),[g,m]);(0,o.useEffect)((()=>{const e=w&&t&&(0,u.isLocalURL)(l),r="undefined"!==typeof h?h:n&&n.locale,o=a[l+"%"+s+(r?"%"+r:"")];e&&!o&&f(n,l,s,{locale:r})}),[s,l,w,h,t,n]);const j={ref:O,onClick:e=>{b.props&&"function"===typeof b.props.onClick&&b.props.onClick(e),e.defaultPrevented||function(e,t,n,r,o,c,i,a){const{nodeName:f}=e.currentTarget;("A"!==f||!function(e){const{target:t}=e.currentTarget;return t&&"_self"!==t||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||e.nativeEvent&&2===e.nativeEvent.which}(e)&&(0,u.isLocalURL)(n))&&(e.preventDefault(),null==i&&(i=r.indexOf("#")<0),t[o?"replace":"push"](n,r,{shallow:c,locale:a,scroll:i}).then((e=>{e&&i&&document.body.focus()})))}(e,n,l,s,d,y,v,h)},onMouseEnter:e=>{(0,u.isLocalURL)(l)&&(b.props&&"function"===typeof b.props.onMouseEnter&&b.props.onMouseEnter(e),f(n,l,s,{priority:!0}))}};if(e.passHref||"a"===b.type&&!("href"in b.props)){const e="undefined"!==typeof h?h:n&&n.locale,t=(0,u.getDomainLocale)(s,e,n&&n.locales,n&&n.domainLocales);j.href=t||(0,u.addBasePath)((0,u.addLocale)(s,e,n&&n.defaultLocale))}return o.default.cloneElement(b,j)};t.default=l},vNVm:function(e,t,n){"use strict";var r=n("AroE");t.__esModule=!0,t.useIntersection=function({rootMargin:e,disabled:t}){const n=t||!c,r=(0,o.useRef)(),[a,f]=(0,o.useState)(!1),l=(0,o.useCallback)((t=>{r.current&&(r.current(),r.current=void 0),n||a||t&&t.tagName&&(r.current=function(e,t,n){const{id:r,observer:o,elements:u}=function(e){const t=e.rootMargin||"";let n=i.get(t);if(n)return n;const r=new Map,o=new IntersectionObserver((e=>{e.forEach((e=>{const t=r.get(e.target),n=e.isIntersecting||e.intersectionRatio>0;t&&n&&t(n)}))}),e);return i.set(t,n={id:t,observer:o,elements:r}),n}(n);return u.set(e,t),o.observe(e),function(){u.delete(e),o.unobserve(e),0===u.size&&(o.disconnect(),i.delete(r))}}(t,(e=>e&&f(e)),{rootMargin:e}))}),[n,e,a]);return(0,o.useEffect)((()=>{c||a||(0,u.default)((()=>f(!0)))}),[a]),[l,a]};var o=n("q1tI"),u=r(n("0G5g"));const c="undefined"!==typeof IntersectionObserver;const i=new Map},wBXr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.E=function(e){var t,n,r=e.App;return n=t=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(n,e);var t=function(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h(e);if(t){var o=h(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return v(this,n)}}(n);function n(){return s(this,n),t.apply(this,arguments)}return function(e,t,n){t&&p(e.prototype,t);n&&p(e,n)}(n,[{key:"render",value:function(){return o.default.createElement(_,{user:this.props.user},d(h(n.prototype),"render",this).call(this))}}]),n}(r),t.displayName="EnvoyAuthApp",t.getInitialProps=function(){var e,t=(e=regeneratorRuntime.mark((function e(t){var n,o,u,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.getInitialProps(t);case 2:return n=e.sent,o=t.ctx.res||{},u=o.locals,c=(void 0===u?{}:u).user,e.abrupt("return",g(g({},n),{},{user:c}));case 6:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var u=e.apply(t,n);function c(e){l(u,r,o,c,i,"next",e)}function i(e){l(u,r,o,c,i,"throw",e)}c(void 0)}))});return function(e){return t.apply(this,arguments)}}(),n},t.w=function(e){var t=function(t){return(0,A().isLoggedIn)()?o.default.createElement(e,g({},t)):(C||window.location.reload(),null)};return t.displayName="WithEnvoyAuth(".concat(e.displayName||e.name||"Component",")"),t},t.u=t.a=t.A=void 0;var r,o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==f(e)&&"function"!==typeof e)return{default:e};var t=a();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var u=r?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(n,o,u):n[o]=e[o]}n.default=e,t&&t.set(e,n);return n}(n("q1tI")),u=(r=n("YFqc"))&&r.__esModule?r:{default:r},c=n("elyg"),i=n("20a2");function a(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return a=function(){return e},e}function f(e){return(f="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t,n,r,o,u,c){try{var i=e[u](c),a=i.value}catch(f){return void n(f)}i.done?t(a):Promise.resolve(a).then(r,o)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t,n){return(d="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e,t){return!t||"object"!==f(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,u=void 0;try{for(var c,i=e[Symbol.iterator]();!(r=(c=i.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(a){o=!0,u=a}finally{try{r||null==i.return||i.return()}finally{if(o)throw u}}return n}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return O(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var j,P="undefined"===typeof window,E={};P||window.EnvoyAuthContext&&(j=window.EnvoyAuthContext),j||((j=o.default.createContext({user:E,updateUser:function(){}})).displayName="EnvoyAuthPluginContext",P||(window.EnvoyAuthContext=j));var _=function(e){var t=e.children,n=e.user,r=void 0===n?E:n,u=w((0,o.useState)(r),2),c=u[0],i=u[1],a=(0,o.useMemo)((function(){return{user:c,updateUser:i}}),[c]);return o.default.createElement(j.Provider,{value:a},t)};_.defaultProps={user:E};var A=function(){var e=o.default.useContext(j);return{user:e.user,isLoggedIn:function(){var t=e.user.id;return!(!t||"0"===t)},updateUser:e.updateUser}};t.u=A;var M=j;t.a=M;t.A=function(e){var t=(0,A().isLoggedIn)(),n=(0,i.useRouter)();return o.default.createElement("span",{onClick:function(){if(!t){var r=e.as,o=e.href,u=r?(0,c.resolveHref)(n.pathname,r):(0,c.resolveHref)(n.pathname,o);window.location.assign(u)}}},o.default.createElement(u.default,g({},e),e.children))};var C="undefined"===typeof window}}]);